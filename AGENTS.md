# AGENTS.md

## 重要ポリシー / Working Style
- すべてのチャット返信・ログ・コードコメントは **日本語** で記載する。
- 「例外を許可」とプロンプトで指示しない限り、いかなる処理も実行前に **[PLAN]**（番号付きの短い計画）を提示し、私の **OK** を待つ。
- 直接編集は禁止。まず **[PATCH_PREVIEW]**（unified diff）を提示し、承認後に適用。
- **無限ループ禁止**：watcher/常駐は起動しない。失敗時の再試行は **最大2回**。それ以上は **[STOP]** して質問する。
- 各コマンド実行後は、実行コマンド・終了コード・3〜8行の **[RESULT_SUMMARY]**・次アクションをチャットに残す。

## コード規約 / Style
- Prettier：single quotes／no semicolons
- TypeScript：`strict` 有効
- コミット：Conventional Commits（日本語で概要を書く。例：`feat: ～～を追加`）

## 検証 / Verification
- 変更適用後はテスト・Lintを実行。終了コードと要約を **[RESULT_SUMMARY]** に含める。
- 失敗時は最小再現コマンドを提示し、**[STOP]** して指示を仰ぐ。
- 必要に応じて **UNDO計画**（ブランチ名・巻き戻し手順）を提案。

## セーフティ / Safety
- 破壊的操作（削除・上書き・大規模リネーム）は **dry-run** やバックアップ案を先に提示。
- 大きな変更はタスクを分割し、段階ごとに **[PLAN] → 承認 → 実行 → 検証** を繰り返す。